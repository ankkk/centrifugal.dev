<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pro/push_notifications">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Push notification API (coming soon) | Centrifugo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><meta data-rh="true" name="twitter:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><meta data-rh="true" property="og:url" content="https://centrifugal.dev/docs/pro/push_notifications"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Push notification API (coming soon) | Centrifugo"><meta data-rh="true" name="description" content="Centrifugo excels in delivering real-time in-app messages to online users. Sometimes though you need a way to engage offline users to come back to your app. Or trigger some update in the app when it&#x27;s running in the background. That&#x27;s where push notifications may be used. Push notifications delivered over battery-efficient platform-dependent transport."><meta data-rh="true" property="og:description" content="Centrifugo excels in delivering real-time in-app messages to online users. Sometimes though you need a way to engage offline users to come back to your app. Or trigger some update in the app when it&#x27;s running in the background. That&#x27;s where push notifications may be used. Push notifications delivered over battery-efficient platform-dependent transport."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://centrifugal.dev/docs/pro/push_notifications"><link data-rh="true" rel="alternate" href="https://centrifugal.dev/docs/pro/push_notifications" hreflang="en"><link data-rh="true" rel="alternate" href="https://centrifugal.dev/docs/pro/push_notifications" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title=" RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title=" Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title=" JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NZRQD92LEX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-NZRQD92LEX",{anonymize_ip:!0})</script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"><link rel="stylesheet" href="/assets/css/styles.135a7fef.css">
<link rel="preload" href="/assets/js/runtime~main.c1d001a9.js" as="script">
<link rel="preload" href="/assets/js/main.ae56981e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Centrifugo</b></a><a class="navbar__item navbar__link" href="/docs/getting-started/introduction">Getting Started</a><a class="navbar__item navbar__link" href="/docs/server/configuration">Server guide</a><a class="navbar__item navbar__link" href="/docs/transports/overview">Transports</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/pro/overview">Centrifugo PRO</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/centrifugal/centrifugo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/getting-started/introduction">v4</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/pro/push_notifications">v4</a></li><li><a class="dropdown__link" href="/docs/3/getting-started/introduction">v3</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedImage_ToTc themedImage--dark_i4oU"><b>Centrifugo</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pro/overview">Centrifugo PRO overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pro/install_and_run">Install and run PRO version</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/pro/tracing">PRO features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/tracing">User and channel tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/analytics">Analytics with ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/capabilities">Channel capabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/throttling">Operation throttling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/user_status">User status API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/connections">Connections API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/user_block">User blocking API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/token_revocation">Token revocation API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pro/push_notifications">Push notification API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/performance">Faster performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/singleflight">Singleflight</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pro/process_stats">CPU and RSS stats</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Push notification API (coming soon)</h1></header><p>Centrifugo excels in delivering real-time in-app messages to online users. Sometimes though you need a way to engage offline users to come back to your app. Or trigger some update in the app when it&#x27;s running in the background. That&#x27;s where push notifications may be used. Push notifications delivered over battery-efficient platform-dependent transport.</p><p>Centrifugo PRO provides API to manage user device tokens, device channel subscriptions and API to send push notifications towards registered devices and group of devices (subscribed to a channel). Centrifugo PRO integrates with the <a href="https://firebase.google.com/docs/cloud-messaging" target="_blank" rel="noopener noreferrer">Firebase Cloud Messaging (FCM)</a> API to send push notifications, so it covers full flow of push notification integration including frontend SDKs (provided by FCM).</p><p>FCM is <strong>free to use</strong> and provides a way to send notifications to the following platforms in a unified way:</p><ul><li><i class="bi bi-apple" style="color:cornflowerblue"></i> iOS devices (over APNs)</li><li><i class="bi bi-android2" style="color:yellowgreen"></i> Android devices (over FCM)</li><li><i class="bi bi-globe" style="color:orange"></i> Web browsers which support Web Push API (Chrome, Firefox, see <a href="https://caniuse.com/push-api" target="_blank" rel="noopener noreferrer">this matrix</a>)</li></ul><p>FCM is only a transport for push notifications, tokens should be stored in the application database. Centrifugo PRO provides an API to store tokens in database (PostgreSQL), manage device subscriptions to channels (replacing native FCM topics functionality – see motivation below).</p><p>Centrifugo PRO comes with super efficient worker queues (based on Redis streams) which allow broadcasting push notifications towards devices in a very efficient way.</p><p>Integration with FCM means that you can use existing Firebase messaging SDKs to extract push notification token for a device on different platforms (iOS, Android, Flutter, web browser) and setting up push notification listeners. Only a couple of additional steps required to integrate frontend with Centrifugo PRO device token and device subscription storage. After doing that you will be able to send push notification towards single device, or towards devices subscribed to a channel with a simple API call like this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -X POST http://localhost:8000/api -d </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{&quot;method&quot;: &quot;send_push_notification&quot;, &quot;params&quot;: {&quot;recipient&quot;: {&quot;channels&quot;: [&quot;test&quot;]}, &quot;notification&quot;: {&quot;fcm&quot;: {&quot;notification&quot;: {&quot;title&quot;: &quot;Hello&quot;, &quot;body&quot;: &quot;How are you?&quot;}}}}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="motivation">Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">​</a></h2><p>Our goals introducing push notification API in Centrifugo PRO were:</p><ul><li>Simplify adding push notifications to the project. FCM SDKs solve the frontend part – giving a unified way to load push token for all popular platforms and a way to set notification handlers. FCM also provides a unified transport layer for all the platforms. But the backend part (token storage and management) is still need to be implemented by application. Centrifugo PRO provides the required backend, it tries to follow best practices when working with FCM maintaining only an actual set of device tokens, reacting on FCM errors and periodically removing stale devices.</li><li>FCM provides API to send push notifications. Centrifugo just wraps it, but at the same time provides efficient queuing. So you can send notifications from your app with minimal latency, and let Centrifugo process sending to FCM for you.</li><li>FCM has a built-in way of sending notification to large groups of devices over <a href="https://firebase.google.com/docs/cloud-messaging/android/topic-messaging" target="_blank" rel="noopener noreferrer">topics</a> mechanism. The problem with native FCM topics though is that client can subscribe to any topic from the frontend side without any permission check. In today&#x27;s world this is usually not desired. So Centrifugo PRO re-implements FCM topics by introducing an additional API to manage device subscriptions to channels. We intentionally called it <code>channels</code> to make the concept closer to our real-time API. In some cases you may have real-time channels and device subscription channels with matching names – to send messages to both online and offline users. Though it&#x27;s up to you.</li></ul><p>Apart from this you get a possibility to inspect sent push notifications over our ClickHouse analytics. Also, FCM provides <a href="https://firebase.google.com/docs/cloud-messaging/understand-delivery?platform=web" target="_blank" rel="noopener noreferrer">its own analytics</a> from which you can get insight into push notification delivery.</p><p>BTW, in our API we left a possibility to publish notifications into FCM topics or sending to raw FCM tokens, so you can combine native FCM primitives with those provided by Centrifugo.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="steps-to-integrate">Steps to integrate<a class="hash-link" href="#steps-to-integrate" title="Direct link to heading">​</a></h2><ol><li>Add FCM SDK on the frontend side, follow FCM instructions for your platform to obtain a push token for a device (see <a href="https://firebase.google.com/docs/cloud-messaging/ios/client" target="_blank" rel="noopener noreferrer">iOS</a>, <a href="https://firebase.google.com/docs/cloud-messaging/android/client" target="_blank" rel="noopener noreferrer">Android</a>, <a href="https://firebase.google.com/docs/cloud-messaging/flutter/client" target="_blank" rel="noopener noreferrer">Flutter</a>, <a href="https://firebase.google.com/docs/cloud-messaging/js/client" target="_blank" rel="noopener noreferrer">Web Browser</a>). So all the frontend part is left to FCM libraries.</li><li>Call your backend API with the obtained token, from the backend call Centrifugo <code>device_register</code> API to register the device in Centrifugo PRO storage.</li><li>Centrifugo returns a registered device object, pass a generated device ID to the frontend and save it on the frontend together with a token received from FCM.</li><li>Subscribe device to the required set of channels, first by calling your backend with device ID and list of channels, check channel permissions and then call Centrifugo <code>device_subscription_add</code> API.</li><li>Call Centrifugo <code>send_push_notification</code> API whenever it&#x27;s time to deliver a push notification.</li></ol><p>At any moment you can inspect device and subscription storage by calling <code>device_list</code> or <code>device_subscription_list</code> APIs.</p><p>Also, you can remove unnecessary by using <code>device_remove</code> or <code>device_subscription_remove</code> APIs.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><p>As mentioned above Centrifigo uses PostgreSQL for token storage. To enable push notifications make sure <code>database</code> section defined in the configration and <code>push_notifications.enabled</code> flag set to <code>true</code>. Also, Centrifugo PRO uses Redis for queuing notifications, so Redis address should be configured also. And finally, to integrate with FCM a path to credentials file must be provided. So full configuration to start sending push notifications may look like this:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;database&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;dsn&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;postgresql://postgres:pass@127.0.0.1:5432/postgres&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;push_notifications&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;redis_address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost:6379&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;fcm_credentials_file_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/path/to/service/account/credentials.json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="api-description">API description<a class="hash-link" href="#api-description" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_register">device_register<a class="hash-link" href="#device_register" title="Direct link to heading">​</a></h3><p>Registers or updates device information.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_register-params">device_register params<a class="hash-link" href="#device_register-params" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>id</code></td><td>string</td><td>No</td><td>ID of the device being registered (only provide when updating).</td></tr><tr><td><code>platform</code></td><td>string</td><td>Yes</td><td>Platform of the device (valid choices: <code>apns</code>, <code>android</code>, <code>web</code>).</td></tr><tr><td><code>token</code></td><td>string</td><td>Yes</td><td>Push notification token for the device.</td></tr><tr><td><code>user</code></td><td>string</td><td>No</td><td>User associated with the device.</td></tr><tr><td><code>meta</code></td><td>map&lt;string, string&gt;</td><td>No</td><td>Additional metadata for the device.</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L485" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_register-result">device_register result<a class="hash-link" href="#device_register-result" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>device</code></td><td><code>Device</code></td><td>The device that was registered.</td></tr></tbody></table><p><code>Device</code>:</p><table><thead><tr><th>Field Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>id</code></td><td>string</td><td>The device&#x27;s ID.</td></tr><tr><td><code>platform</code></td><td>string</td><td>The device&#x27;s platform.</td></tr><tr><td><code>token</code></td><td>string</td><td>The device&#x27;s token.</td></tr><tr><td><code>user</code></td><td>string</td><td>The user associated with the device.</td></tr><tr><td><code>meta</code></td><td>map&lt;string, string&gt;</td><td>Additional metadata about the device.</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/master/internal/apiproto/api.proto#L558" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_remove">device_remove<a class="hash-link" href="#device_remove" title="Direct link to heading">​</a></h3><p>Removes device from storage.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_remove-params">device_remove params<a class="hash-link" href="#device_remove-params" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>ids</code></td><td>repeated string</td><td>No</td><td>A list of device IDs to be removed</td></tr><tr><td><code>tokens</code></td><td>repeated string</td><td>No</td><td>A list of device tokens to be removed</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L493" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_remove-result">device_remove result<a class="hash-link" href="#device_remove-result" title="Direct link to heading">​</a></h4><p>Empty object.</p><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L562" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_list">device_list<a class="hash-link" href="#device_list" title="Direct link to heading">​</a></h3><p>Returns a paginated list of registered devices according to request filter conditions.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_list-params">device_list params<a class="hash-link" href="#device_list-params" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>ids</code></td><td>repeated string</td><td>No</td><td>List of device IDs to filter results.</td></tr><tr><td><code>platforms</code></td><td>repeated string</td><td>No</td><td>List of device platforms to filter results.</td></tr><tr><td><code>tokens</code></td><td>repeated string</td><td>No</td><td>List of device tokens to filter results.</td></tr><tr><td><code>users</code></td><td>repeated string</td><td>No</td><td>List of device users to filter results.</td></tr><tr><td><code>since</code></td><td>string</td><td>No</td><td>Cursor for pagination (last device id in previous batch).</td></tr><tr><td><code>limit</code></td><td>int32</td><td>No</td><td>Maximum number of devices to retrieve.</td></tr><tr><td><code>include_meta</code></td><td>bool</td><td>No</td><td>Flag indicating whether to include meta information for each device.</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L498" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_list-result">device_list result<a class="hash-link" href="#device_list-result" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>items</code></td><td>repeated <code>Device</code></td><td>A list of devices</td></tr><tr><td><code>has_more</code></td><td>bool</td><td>A flag indicating whether there are more devices available</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L565" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_add">device_subscription_add<a class="hash-link" href="#device_subscription_add" title="Direct link to heading">​</a></h3><p>Subscribes device to the provided list of channels.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_add-params">device_subscription_add params<a class="hash-link" href="#device_subscription_add-params" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>device_id</code></td><td>string</td><td>Yes</td><td>ID of the device to add subscriptions for</td></tr><tr><td><code>channels</code></td><td>repeated string</td><td>No</td><td>List of channels to subscribe the device to</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L508" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_add-result">device_subscription_add result<a class="hash-link" href="#device_subscription_add-result" title="Direct link to heading">​</a></h4><p>Empty object.</p><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L579" target="_blank" rel="noopener noreferrer">Proto definitions</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_remove">device_subscription_remove<a class="hash-link" href="#device_subscription_remove" title="Direct link to heading">​</a></h3><p>Unsubscribes device from the provided list of channels.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_remove-params">device_subscription_remove params<a class="hash-link" href="#device_subscription_remove-params" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>device_id</td><td>string</td><td>Yes</td><td>ID of the device to remove the subscription from</td></tr><tr><td>channels</td><td>repeated string</td><td>No</td><td>List of channels to remove</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L513" target="_blank" rel="noopener noreferrer">Proto definitions</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_remove-result">device_subscription_remove result<a class="hash-link" href="#device_subscription_remove-result" title="Direct link to heading">​</a></h4><p>Empty object.</p><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L582" target="_blank" rel="noopener noreferrer">Proto definitions</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_list">device_subscription_list<a class="hash-link" href="#device_subscription_list" title="Direct link to heading">​</a></h3><p>Returns a paginated list of device subscriptions according to request filter conditions.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_list-params">device_subscription_list params<a class="hash-link" href="#device_subscription_list-params" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>device_ids</td><td>repeated string</td><td>No</td><td>List of device IDs to filter results</td></tr><tr><td>device_platforms</td><td>repeated string</td><td>No</td><td>List of device platforms to filter results</td></tr><tr><td>device_tokens</td><td>repeated string</td><td>No</td><td>List of device tokens to filter results</td></tr><tr><td>device_users</td><td>repeated string</td><td>No</td><td>List of device users to filter results</td></tr><tr><td>channels</td><td>repeated string</td><td>No</td><td>Filter by list of channels the devices are subscribed to</td></tr><tr><td>since</td><td>string</td><td>No</td><td>Cursor for pagination (last device subscription id in the previous batch).</td></tr><tr><td>limit</td><td>int32</td><td>No</td><td>Maximum number of devices to return in response</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L518" target="_blank" rel="noopener noreferrer">Proto definitions</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device_subscription_list-result">device_subscription_list result<a class="hash-link" href="#device_subscription_list-result" title="Direct link to heading">​</a></h4><table><thead><tr><th>Field Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>items</code></td><td>repeated <code>DeviceSubscription</code></td><td>An array of <code>DeviceSubscription</code> items.</td></tr><tr><td><code>has_more</code></td><td>bool</td><td>Indicates if there are more items to be fetched.</td></tr></tbody></table><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L585" target="_blank" rel="noopener noreferrer">Proto definitions</a></p><p><code>DevideSubscription</code>:</p><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>string</td><td>Unique identifier of the device subscription.</td></tr><tr><td>device_id</td><td>string</td><td>Unique identifier of the device.</td></tr><tr><td>device_token</td><td>string</td><td>Token used by the device to receive push notifications.</td></tr><tr><td>device_platform</td><td>string</td><td>Platform of the device</td></tr><tr><td>device_user</td><td>string</td><td>Unique identifier of the user associated with the device.</td></tr><tr><td>channel</td><td>string</td><td>Channel the device is subscribed to.</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="send_push_notification">send_push_notification<a class="hash-link" href="#send_push_notification" title="Direct link to heading">​</a></h3><p>Send push notification to specific <code>device_ids</code>, or to <code>channels</code>, or <code>fcm_tokens</code>, or to <code>fcm_topic</code>. Request will be queued by Centrifugo, consumed by Centrifugo built-in workers and sent to FCM API.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="send_push_notification-params">send_push_notification params<a class="hash-link" href="#send_push_notification-params" title="Direct link to heading">​</a></h4><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L700" target="_blank" rel="noopener noreferrer">Proto definitions</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="send_push_notification-result">send_push_notification result<a class="hash-link" href="#send_push_notification-result" title="Direct link to heading">​</a></h4><p><a href="https://github.com/centrifugal/centrifugo/blob/157d3a7da9bdae5b6274da99473deee25f158e40/internal/apiproto/api.proto#L712" target="_blank" rel="noopener noreferrer">Proto definitions</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tutorial">Tutorial<a class="hash-link" href="#tutorial" title="Direct link to heading">​</a></h2><p>Coming soon.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/centrifugal/centrifugal.dev/edit/main/docs/pro/push_notifications.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pro/token_revocation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Token revocation API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pro/performance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Faster performance</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#steps-to-integrate" class="table-of-contents__link toc-highlight">Steps to integrate</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#api-description" class="table-of-contents__link toc-highlight">API description</a><ul><li><a href="#device_register" class="table-of-contents__link toc-highlight">device_register</a></li><li><a href="#device_remove" class="table-of-contents__link toc-highlight">device_remove</a></li><li><a href="#device_list" class="table-of-contents__link toc-highlight">device_list</a></li><li><a href="#device_subscription_add" class="table-of-contents__link toc-highlight">device_subscription_add</a></li><li><a href="#device_subscription_remove" class="table-of-contents__link toc-highlight">device_subscription_remove</a></li><li><a href="#device_subscription_list" class="table-of-contents__link toc-highlight">device_subscription_list</a></li><li><a href="#send_push_notification" class="table-of-contents__link toc-highlight">send_push_notification</a></li></ul></li><li><a href="#tutorial" class="table-of-contents__link toc-highlight">Tutorial</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contacts</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:centrifugal.dev@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Send e-mail</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/centrifugal/centrifugo/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/joinchat/U57MI8Lam9mhpuhd" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/tYgADKx" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/attributions">Attributions</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Centrifugal.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c1d001a9.js"></script>
<script src="/assets/js/main.ae56981e.js"></script>
</body>
</html>